 const char webapp_html[] PROGMEM = R"rawliteral(
<link rel="shortcut icon" href="someshit/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="someshit/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="someshit/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="someshit/favicon-48x48.png">
  )rawliteral";
 const char index_css[] PROGMEM = R"rawliteral(
:root{--acid-color: 41, 172, 96;--battery-width: 8em}.cell{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.percentage{font-size:100%;color:#fff;margin-top:15px}.percentage i{margin-right:6px;display:var(--display-charging)}.info{position:absolute;bottom:0;left:0;display:flex;align-items:center;margin:5px;font-size:80%;color:#ffffff80;transition:.2s ease-in-out}.info:hover{color:#fff}.info i{margin-right:5px}.info a{color:inherit}.battery{position:relative;width:var(--battery-width);height:200px;border:4px solid #fff;border-radius:20px}@media (max-width: 575.9px){.battery{width:16vw;border-radius:15px}}.battery:after{position:absolute;top:-18px;left:calc(var(--battery-width) / 3.3);width:calc(var(--battery-width) / 3.3);height:10px;background-color:#fff;border-radius:5px 5px 0 0;content:""}@media (max-width: 575.9px){.battery:after{left:4.8484848485vw;width:4.8484848485vw}}.acid-container{overflow:hidden;height:calc(100% - 8px);border-radius:12px;margin:4px}@media (max-width: 575.9px){.acid-container{border-radius:8px}}.acid-container .acid{height:200px;display:flex;flex-direction:column;flex-flow:column-reverse;filter:hue-rotate(0deg);transition:filter .5s ease-in-out}.acid-container .acid .fill{background:white;height:var(--acid-height);width:100%;flex-shrink:0;transition:height 2s ease-in-out}.acid-container .acid .waves{display:block;width:100%;height:10px;margin-bottom:-1px}.acid-container .acid .waves .parallax>use{-webkit-animation:move-forever 12s linear infinite;animation:move-forever 12s linear infinite}.acid-container .acid .waves .parallax>use:nth-child(1){-webkit-animation-delay:-2s;animation-delay:-2s;fill:rgba(var(--acid-color),.6)}.acid-container .acid .waves .parallax>use:nth-child(2){-webkit-animation-delay:-2s;animation-delay:-2s;-webkit-animation-duration:5s;animation-duration:5s;fill:rgba(var(--acid-color),.8)}.acid-container .acid .waves .parallax>use:nth-child(3){-webkit-animation-delay:-4s;animation-delay:-4s;-webkit-animation-duration:3s;animation-duration:3s;fill:rgb(var(--acid-color))}@-webkit-keyframes move-forever{0%{transform:translate(-90px)}to{transform:translate(85px)}}@keyframes move-forever{0%{transform:translate(-90px)}to{transform:translate(85px)}}#card{background-color:#143642;border-radius:10px;overflow:hidden;display:flex;flex-direction:column;align-items:center}.batteryArray{display:flex;flex-direction:row;background-color:#143642;height:300px;width:100%}.batteryStats{min-height:300px;background-color:#143642;width:90%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;color:#fff;font-family:monospace;font-size:2.2em}.batteryStats>div{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:90%;min-height:50px}@media (max-width: 575.9px){.batteryStats>div{flex-direction:column}}.batteryStats>div>span:nth-child(2){font-weight:700;white-space:nowrap}.ntcsStats{width:88%;display:flex;justify-content:space-evenly;font-family:monospace;font-size:18px;color:#fff}.ntcsStats>span{transform:rotate(-90deg) translate(130px)}.level{background-color:rgb(var(--acid-color))}.percentage{margin-top:-35px;font-family:monospace;font-size:25px;display:flex;flex-direction:row;transform:rotate(-90deg) translate(40px)}body>div.topnav>h1:before{content:"";position:absolute;top:0;left:25%;width:50%;height:100%;z-index:-1;opacity:1;background:linear-gradient(270deg,#143642,#143642,#143642,#143642);transition:opacity .5s}body>div.topnav>h1:after{content:"";position:absolute;top:0;left:25%;width:50%;height:100%;z-index:-2;opacity:1;background:linear-gradient(270deg,#143642,#143642,#143642,#143642);transition:opacity .5s}body>div.topnav>h1.charging:after{content:"";position:absolute;top:0;left:25%;width:50%;height:100%;z-index:-2;background:linear-gradient(270deg,rgba(0,0,0,0),#ac294d,#ac294d,rgba(0,0,0,0))}body>div.topnav>h1.discharging:after{content:"";position:absolute;top:0;left:25%;width:50%;height:100%;z-index:-2;background:linear-gradient(270deg,rgba(0,0,0,0),#29ac60,#29ac60,rgba(0,0,0,0))}body>div.topnav>h1.discharging:before{opacity:0}:root{--checkbox-height: 50px}input[type=checkbox]{height:0;width:0;visibility:hidden}label{cursor:pointer;text-indent:-9999px;width:calc(var(--checkbox-height) * 2);height:var(--checkbox-height);background:grey;display:block;border-radius:var(--checkbox-height);position:relative}label:after{content:"";position:absolute;top:calc(var(--checkbox-height) / 20);left:calc(var(--checkbox-height) / 20);width:calc(var(--checkbox-height) - var(--checkbox-height) / 10);height:calc(var(--checkbox-height) - var(--checkbox-height) / 10);background:#fff;border-radius:calc(var(--checkbox-height) - var(--checkbox-height) / 10);transition:.3s}input:checked+label{background:#29ac60}input:checked+label:after{left:calc(100% - var(--checkbox-height) / 20);transform:translate(-100%)}label:active:after{width:calc(var(--checkbox-height) * 1.3)}:root{--select-border: #777;--select-focus: blue;--select-arrow: var(--select-border)}*,*:before,*:after{box-sizing:border-box;font-family:monospace}html{font-family:monospace;text-align:center}body{margin:0;width:100%;height:100vh;background-color:#484848}h1{font-size:2.2rem;color:#fff;margin:20px 0}h2{font-size:1.8rem;font-weight:700;margin:13px 0;color:#ccc}h4{font-size:2rem;font-weight:700;margin:15px 0;color:#ccc}.topnav{overflow:hidden;background-color:#143642;position:fixed;left:0;top:0;width:100%;height:70px;z-index:1;box-shadow:2px 2px 12px 1px #00000080}.topnav a#glyph0>img{left:20px}.topnav a#glyph1>img{right:20px}.topnav a#glyph2>img{right:80px}.topnav a#glyph3>img{right:140px}.topnav a#glyph5>img{right:200px}.topnav a#glyph4>img{left:20px;display:none}.topnav>a>img{width:40px;top:15px;position:fixed}.content{padding:80px 10px 75px;max-width:800px;margin:0 auto;min-height:80vh;display:flex;flex-direction:column;justify-content:center}#card{background-color:#143642;box-shadow:2px 2px 12px 1px #8c8c8c80;padding-top:10px;padding-bottom:20px;display:flex;flex-direction:column;align-items:center;width:-webkit-fill-available}.button{padding:10px 30px;font-size:20px;text-align:center;outline:none;color:#fff;background-color:#0f8b8d;border:none;border-radius:5px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);transition:all .2s}.button:disabled{background-color:gray}.button:active{background-color:#0f8b8d;box-shadow:2 2px #cdcdcd;transform:translateY(2px)}.state{font-size:1.5rem;color:#8c8c8c;font-weight:700}.scanModbus{font-size:1rem;color:#484848;font-weight:700}.ModbusReg{font-size:1rem;color:#484848;font-weight:700;margin:0 auto;column-count:3;-moz-column-count:3;-webkit-column-count:3}.ModbusReg>div{display:flex;flex-direction:row;align-items:center}.ModbusReg>div>input[type=number]{border:none;font-size:1rem;text-align:center;width:70px;background:transparent;font-family:Arial,Helvetica,sans-serif;font-weight:700;color:#484848}.ModbusReg>div>input[type=number].changed{color:red}.scanStations{width:90%;font-size:1.3rem;color:#999;font-family:Arial,Helvetica,sans-serif}.scanStations>div{width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;transition:all .2s;padding:3px 10px;border-radius:4px}.scanStations>div>.ssid{color:#fff}.scanStations>div:hover{background-color:#143642;color:#fff;cursor:pointer;background-color:#0f8b8d}.scanStations>div>span:nth-child(1){font-size:1.5rem;text-align:left}@media (max-width: 575.9px){.scanStations>div>.params{display:flex;flex-direction:column;align-items:flex-end}.scanStations>div>.params>span{flex-basis:0}}.credentials>input{border:1px solid;border-radius:.25em;font-size:1.5rem;text-align:left;width:80%;font-weight:700;color:#333}select{appearance:none;background-color:transparent;border:none;padding:0;margin:0;cursor:inherit;line-height:inherit;outline:none;width:100%;font-size:1.5rem;text-align:center}.select{display:flex;flex-direction:row;justify-content:center;border:1px solid gray;align-items:center;position:relative;border-radius:.25em;padding:.25em .5em;font-size:1.5rem;cursor:pointer;background-color:#fff;width:50%}label{font-size:1.4rem;font-weight:500}.select+label{margin-top:2rem}input[type=number]{border:none;font-size:1.5rem;text-align:center;width:100%}#footer{width:100%;height:65px;background-color:#143642;position:fixed;bottom:0px;overflow:hidden}#footer>p{font-size:19px;font-family:monospace;color:#fff;margin:0;padding:0}#cashedElems{width:80%;font-size:1.3em;font-weight:700;color:#fff}#cashedElems>div.row{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;padding:5px 10px;transition:all .2s;cursor:pointer;border-radius:5px}#cashedElems>div.row:hover{background-color:#0f8b8d}#cashedElems>div.row>div{user-select:none}#cashedElems>div.row>div.row__title{flex-basis:12em;text-align:left}#cashedElems>div.row>div.row__b64{flex-basis:3em;text-align:left}#cashedElems>div.row>div.row__blob{flex-basis:12em;text-align:left}#cashedElems>div.row>div.row__date{flex-basis:5em;text-align:left}.loader-89{width:48px;height:24px;display:inline-block;position:relative;border:1px solid #FFF}.loader-89:after{content:"";position:absolute;left:100%;top:50%;transform:translateY(-50%);border:1px solid #FFF;width:5px;height:12px}.loader-89:before{content:"";position:absolute;left:-8px;top:50%;transform:translateY(-50%);height:80%;width:6px;-webkit-animation:animloader89 2s linear infinite;animation:animloader89 2s linear infinite}@-webkit-keyframes animloader89{0%{box-shadow:11px 0 #fff0,22px 0 #fff0,33px 0 #fff0,44px 0 #fff0}25%{box-shadow:11px 0 #fff,22px 0 #fff0,33px 0 #fff0,44px 0 #fff0}50%{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff0,44px 0 #fff0}75%{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff,44px 0 #fff0}to{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff,44px 0 #fff}}@keyframes animloader89{0%{box-shadow:11px 0 #fff0,22px 0 #fff0,33px 0 #fff0,44px 0 #fff0}25%{box-shadow:11px 0 #fff,22px 0 #fff0,33px 0 #fff0,44px 0 #fff0}50%{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff0,44px 0 #fff0}75%{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff,44px 0 #fff0}to{box-shadow:11px 0 #fff,22px 0 #fff,33px 0 #fff,44px 0 #fff}}@media (max-width: 767.9px){.topnav{height:50px}.topnav>h1{margin:10px 0}.topnav a#glyph0>img{left:20px}.topnav a#glyph1>img{right:20px}.topnav a#glyph2>img{right:70px}.topnav a#glyph3>img{right:120px}.topnav a#glyph5>img{right:170px}.topnav a#glyph4>img{left:20px;display:none}.topnav a>img{top:10px;width:30px}#footer{height:50px}#footer>p{font-size:15px}}@media (max-width: 575.9px){.topnav{height:50px}.topnav>h1{margin:10px 0}.topnav a#glyph0>img{left:20px;top:10px;width:30px;display:none}.topnav a#glyph1>img{right:20px;top:10px;width:30px;display:none}.topnav a#glyph2>img{right:70px;top:10px;width:30px;display:none}.topnav a#glyph3>img{right:120px;top:10px;width:30px;display:none}.topnav a#glyph5>img{width:30px;display:none}.topnav a#glyph4>img{left:20px;top:10px;width:30px;display:block}}
  )rawliteral";
 const char index_js[] PROGMEM = R"rawliteral(
!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=(e,t)=>t.some((t=>e instanceof t));let t,n;const o=new WeakMap,a=new WeakMap,s=new WeakMap,r=new WeakMap,i=new WeakMap;let c={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function l(e){c=e(c)}function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),p(o.get(this))}:function(...t){return p(e.apply(m(this),t))}:function(t,...n){const o=e.call(m(this),t,...n);return s.set(o,t.sort?t.sort():[t]),p(o)}}function u(n){return"function"==typeof n?d(n):(n instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),o()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)}));a.set(e,t)}(n),e(n,t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,c):n)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(p(e.result)),o()},s=()=>{n(e.error),o()};e.addEventListener("success",a),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),i.set(t,e),t}(e);if(r.has(e))return r.get(e);const t=u(e);return t!==e&&(r.set(e,t),i.set(t,e)),t}const m=e=>i.get(e);function b(e,t,{blocked:n,upgrade:o,blocking:a,terminated:s}={}){const r=indexedDB.open(e,t),i=p(r);return o&&r.addEventListener("upgradeneeded",(e=>{o(p(r.result),e.oldVersion,e.newVersion,p(r.transaction),e)})),n&&r.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),i.then((e=>{s&&e.addEventListener("close",(()=>s())),a&&e.addEventListener("versionchange",(e=>a(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}const h=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],w=new Map;function f(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,a=g.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!a&&!h.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,a?"readwrite":"readonly");let r=s.store;return o&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),a&&s.done]))[0]};return w.set(t,s),s}l((e=>({...e,get:(t,n,o)=>f(t,n)||e.get(t,n,o),has:(t,n)=>!!f(t,n)||e.has(t,n)})));const y=["continue","continuePrimaryKey","advance"],v={},S=new WeakMap,I=new WeakMap,D={get(e,t){if(!y.includes(t))return e[t];let n=v[t];return n||(n=v[t]=function(...e){S.set(this,I.get(this)[t](...e))}),n}};async function*P(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const n=new Proxy(t,D);for(I.set(n,t),i.set(n,m(t));t;)yield n,t=await(S.get(n)||t.continue()),S.delete(n)}function B(t,n){return n===Symbol.asyncIterator&&e(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&e(t,[IDBIndex,IDBObjectStore])}l((e=>({...e,get:(t,n,o)=>B(t,n)?P:e.get(t,n,o),has:(t,n)=>B(t,n)||e.has(t,n)})));const L={};let M=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||self.indexedDB;var E;let T;L.init=async e=>{console.log("DB-init",e),"indexedDB"in window?await E(e):console.log("This browser doesn't support IndexedDB")},E=async e=>await b(e,1,{upgrade(t){const n=t.createObjectStore(e,{keyPath:"title",autoIncrement:!0});n.createIndex("title","title",{unique:!0}),n.createIndex("b64","b64",{unique:!0}),n.createIndex("dateModified","dateModified",{unique:!1})}}),L.addPublication=async(e,t,n,o)=>{console.log(e,t,n);let a=await b(t,1);return await a.get(t,e)?(await a.put(t,{title:e,blob:n,b64:o,dateModified:(new Date).getTime()}),console.log("updated"),"updated"):(await a.add(t,{title:e,blob:n,b64:o,dateModified:(new Date).getTime()}),console.log("added"),"added")},L.loadPublication=async(e,t)=>{const n=await b(t,1);return await n.get(t,e)},L.checkPublication=async(e,t)=>{const n=await b(t,1);let o,a=n.transaction(t,"readonly");try{o=await a.objectStore(t).get(e)}catch{}return n.close(),o},L.loadImage=async e=>{const t=await async function(e){return console.log("function -loader - db "+e),new Promise(((t,n)=>{let o;try{o=fetch(e,{mode:"cors"}).then((e=>e.blob())),t(o)}catch(a){console.log(a)}finally{console.log("We do cleanup here")}}))}(`${e}`);console.log("recValue ",t);let n=t;return console.log(n),{title:e,blob:n,b64:await L.convToB64(n),dateModified:(new Date).getTime()}},L.readAllDB=async e=>{const t=await b(e,1),n=await t.getAll(e);return await t.getAllKeys(e),t.close(),n},L.deletePublication=async(e,t)=>{const n=await b(e,1);let o=n.transaction(e,"readwrite");try{await o.objectStore(e).get(t);o.objectStore(e).delete(t)}catch(a){}n.close()},L.deleteDatabase=e=>{M.open(e,1);var t=M.deleteDatabase(e);t.onsuccess=function(t){console.log("Database "+e+" deleted")},console.warn(t)},L.deleteObjStore=e=>{var t=L.getObjectStore(e,"readwrite");try{t.clear()}catch(n){}},L.bmpTOblob=e=>new Promise((t=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("bitmaprenderer").transferFromImageBitmap(e),n.toBlob((e=>t(e)))})),L.convToB64=function(e){return new Promise((t=>{let n=new FileReader;n.onload=function(){t(this.result)},n.readAsDataURL(e)}))},new Promise(((e,t)=>{L.init("bmsesp-db").then((t=>{console.log("db",t),e()}))})),document.querySelector("h1").innerText=window.location.pathname.split("/")[1].charAt(0).toUpperCase()+window.location.pathname.split("/")[1].slice(1);const x=["home.svg","cog.svg","wifi.svg","update.svg","menu.svg","terminal.svg"];function C(e){return new Promise(((t,n)=>{console.log(e),L.checkPublication(e,"bmsesp-db").then((n=>{n?L.loadPublication(e,"bmsesp-db").then((e=>{t(e)})):L.loadImage(e).then((n=>{n&&(""==n.blob.type&&"text/html"==n.blob.type||L.addPublication(e,"bmsesp-db",n.blob,n.b64).then((()=>{t(n)})))}))}))}))}async function A(e){return new Promise((function(t,n){console.log("======================= : ",e),C(e).then((e=>{var n=document.createElement("script");let o=e.blob;o.text().then((e=>{n.innerHTML=e})),n.async=!1,console.log(n),document.head.appendChild(n),t(o.text())}))}))}x.forEach(((e,t)=>{C(x[t]).then((e=>{let n=document.createElement("img");n.src=e.b64;let o=e.blob,a=e.b64;o.text().then((e=>console.log(a.length/e.length))),document.querySelector(`#glyph${t}`).appendChild(n)}))}));const j=["onIPMessage.js","initBatteryArray.js","btr2refrshlvlJs.js","onBTRMessage.js","onNetMessage.js"];var k;async function q(){return new Promise(((e,t)=>{(k=new WebSocket("ws://bmsesp.local/ws")).onopen=t=>{console.log("WS opened"),console.log(t),e(k)},k.onclose=e=>{console.log("WS closed"),console.log(e),setTimeout(initWebSocket,2e3)}}))}if("/"==window.location.pathname){let e=function(){return new Promise(((e,t)=>{A(j[0]).then((()=>{A(j[1]).then((()=>{A(j[2]).then((()=>{initBatteryArray(4),A(j[3]).then((t=>e(t)))}))}))}))}))};console.log(window.location.pathname),document.querySelector("#card").innerHTML='\n    <div id="batteryArray" class="batteryArray"></div>\n        <div class="ntcsStats"></div>\n        <div class="batteryStats"></div> \n    ',document.querySelector("#footer").innerHTML='\n    <p>Network name : <span id="netName">%SSID%</span></p>\n    <p>softAP IP : <span id="softIP">%LOCALIP%</span></p>\n    <p>public IP : <span id="pubIP">%PUBLICIP%</span></p>\n    ',q().then((t=>{e().then((()=>{k.send("ip"),k.send("batteryStatus")})),console.log(t),t.onmessage=e=>{if(console.log("WS message"),"BAT"===e.data.slice(0,3))onBTRMessage(e);else onIPMessage(e)},clearInterval(T),T=setInterval((()=>{t.send("batteryStatus")}),1300)}))}else if("/netscan"==window.location.pathname){let e=function(e){return new Promise(((e,t)=>{A(j[4]).then((()=>{A(j[0]).then(e())}))}))};q().then((t=>{e().then((()=>{k.send("netscan"),k.send("ip"),k.send("batteryStatus")})),console.log(t),t.onmessage=e=>{if(console.log("WS message"),console.log(e.data.slice(0,3)),"SCN"===e.data.slice(0,3))onNetMessage(e);else onIPMessage(e)}})),document.querySelector("#card").innerHTML='\n    <p><button id="netscan" class="button">Scan</button></p>\n    <h2>Scaned Stations</h2>\n    <div id="scanStations" class="scanStations">\n    <span class="loader-89"></span>\n    </div>\n    <h4>Connect to network:</h4>\n    <div class="credentials">\n    <input id="ssidInput" type=\'text\' placeholder=\'network\' name=\'n\'/>\n    <hr /><input id="ssidPassword" type=\'password\' placeholder=\'password\' name=\'p\'/>\n    <hr /><button class="button" id="credits" disabled="disabled">Connect</button>\n    </div>\n    ',document.querySelector("#netscan").addEventListener("mousedown",(e=>{k.send("netscan"),document.querySelector("#scanStations").innerHTML="";let t=document.createElement("span");t.classList.add("loader-89"),document.querySelector("#scanStations").appendChild(t)}))}else if("/update"==window.location.pathname){let e=function(e){return new Promise(((e,t)=>{A(j[0]).then((t=>e(t)))}))};q().then((t=>{e().then((e=>{t.send("ip"),t.send("batteryStatus")})),console.log(t),t.onmessage=e=>{console.log("WS message"),console.log(e.data);e.data.slice(0,3);onIPMessage(e)}})),document.querySelector("#card").innerHTML='\n    <form method="POST" action="http://bmsesp.local/update" enctype="multipart/form-data">\n    <input class="button" type="file" accept=".bin" name="update">\n    <input class="button" type="submit" value="Update"></form>'}else if("/terminal"==window.location.pathname){let e=function(e){return new Promise(((e,t)=>{A(j[0]).then((t=>e(t)))}))};q().then((t=>{e().then((e=>{t.send("ip"),t.send("batteryStatus")})),console.log(t),t.onmessage=e=>{console.log("WS message"),console.log(e.data);e.data.slice(0,3);onIPMessage(e)}})),document.querySelector("#card").innerHTML='\n    <form method="POST" action="http://bmsesp.local/update" enctype="multipart/form-data">\n    <input class="button" type="file" accept=".bin" name="update">\n    <input class="button" type="submit" value="Update"></form>'}else if("/settings"==window.location.pathname){let e=function(e){return new Promise(((e,t)=>{A(j[0]).then((t=>e(t)))}))},t=function(e){console.log(e,e.length);for(let t=0;t<e.length;t++){const o=e[t],a=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];let s=document.createElement("div");s.setAttribute("class","row");let r=document.createElement("div");r.innerText=o.title,r.setAttribute("class","row__title");let i=document.createElement("div");i.innerText=o.b64.length,i.setAttribute("class","row__b64");let c=document.createElement("div");c.setAttribute("class","row__blob");let l=document.createElement("div");l.innerHTML=o.blob.type.split("/")[0]+"<br>"+o.blob.type.split("/")[1],l.setAttribute("class","row__blob__type");let d=document.createElement("div");d.innerText=o.blob.size,d.setAttribute("class","row__blob__size");let u=document.createElement("div"),p=new Date(o.dateModified);u.innerHTML=`${p.getDate()} ${a[p.getMonth()]} ${p.getFullYear()}<br>${p.getHours()}:${p.getMinutes()}:${p.getSeconds()}`,u.setAttribute("class","row__date"),s.appendChild(r),s.appendChild(i),c.appendChild(d),c.appendChild(l),s.appendChild(c),s.appendChild(u),s.childNodes.forEach((e=>e.childNodes.forEach((e=>e.ariaLabel="row-"+(t+1))))),s.childNodes.forEach((e=>e.ariaLabel="row-"+(t+1))),s.ariaLabel="row-"+(t+1),s.onmousedown=e=>{console.log(e.target.ariaLabel);let t=e.target.ariaLabel,n=document.querySelector(`#cashedElems > [aria-label=${t}]`),o=confirm("shure?");console.log(o),o&&(L.deletePublication("bmsesp-db",n.firstChild.innerText),console.log(n.firstChild.innerText),n.remove())},n.appendChild(s)}};q().then((t=>{e().then((e=>{k.send("ip"),k.send("batteryStatus")})),console.log(t),t.onmessage=e=>{console.log("WS message");e.data.slice(0,3);onIPMessage(e)}})),document.querySelector("#card").innerHTML='\n    <p><button id="readCashed" class="button">Read Cashed Elems</button></p>\n    <div id="cashedElems">\n    </div>';const n=document.querySelector("#cashedElems");document.querySelector("#readCashed").addEventListener("mousedown",(e=>{n.innerHTML="",L.readAllDB("bmsesp-db").then((e=>{t(e)}))}))}else console.log(window.location.pathname),document.querySelector("#card").innerHTML='<div title="404">404</div>';
  )rawliteral";